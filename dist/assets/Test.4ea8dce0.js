import{A as c,B as h,S as m,D as u,W as l,V as r,H as p,X as i}from"./tweakpane.5c9555f7.js";import{g as v,h as d,y as A,o as M,c as g}from"./index.11aaa4ab.js";class C{constructor(e){this.pane=new c.exports.Pane;const t={position:0};this.pane.addInput(t,"position",{options:{\u5168\u4F53:0,\u5934:1,\u624B:2,\u811A:3,\u817F:4}}),this.canvas=e,this.CreateScene(),this.CreateCamera(),this.CreateModel(),this.pane.on("change",n=>{switch(n.value){case 0:this.MoveActiveCamera({radius:16,alpha:Math.PI/2,beta:Math.PI*2/5,target:{x:0,y:5,z:-2}});break;case 1:this.MoveActiveCamera({radius:16,alpha:Math.PI/2,beta:Math.PI/2,target:{x:0,y:9,z:-10}});break;case 2:this.MoveActiveCamera({radius:16,alpha:0,beta:Math.PI/2,target:{x:-10,y:5,z:.3}});break;case 3:this.MoveActiveCamera({radius:16,alpha:Math.PI/2,beta:Math.PI/3,target:{x:0,y:-4,z:-6}});break;case 4:this.MoveActiveCamera({radius:16,alpha:Math.PI/2,beta:Math.PI/2,target:{x:0,y:3,z:-10}});break}}),this.engine.runRenderLoop(()=>{this.scene.render()}),window.addEventListener("resize",()=>{this.engine.resize()})}CreateScene(){this.engine=new h(this.canvas,!0,{adaptToDeviceRatio:!0}),this.engine.displayLoadingUI(),this.scene=new m(this.engine);const e=u.CreateFromPrefilteredData("textures/environmentMaps/harbor.env",this.scene);e.gammaSpace=!1,this.scene.environmentTexture=e,this.scene.createDefaultSkybox(e,!0,1e3,.25),this.scene.environmentIntensity=1}CreateCamera(){this.camera1=new l("camera1",Math.PI/2,Math.PI/3,16,r.Zero(),this.scene),this.camera1.attachControl(),this.camera1.wheelPrecision=10}async CreateModel(){const e=await p.ImportMeshAsync("","models/uruha_rushia_-_hololive_vtuber/","scene.gltf",this.scene);this.camera1.setTarget(new r(0,5,0)),e.animationGroups[0]=null,this.vtb=e,this.engine.hideLoadingUI()}MoveActiveCamera({radius:e,alpha:t,beta:n,target:s}){const a=this.camera1;a.animations=[this.createAnimation("radius",a.radius,e),this.createAnimation("alpha",a.alpha,t),this.createAnimation("beta",a.beta,n),this.createAnimation("target.x",a.target.x,s.x),this.createAnimation("target.y",a.target.y,s.y),this.createAnimation("target.z",a.target.z,s.z)],this.scene.beginAnimation(a,0,100,!1,2)}createAnimation(e,t,n){const s=new i("animation",e,60,i.ANIMATIONTYPE_FLOAT,i.ANIMATIONLOOPMODE_CONSTANT);return s.setKeys([{frame:0,value:t},{frame:100,value:n}]),s}}const y=v({setup(o){const e=d();return A(()=>{new C(e.value)}),(t,n)=>(M(),g("canvas",{ref_key:"bjsCanvas",ref:e,class:"w-full h-screen"},null,512))}});export{y as default};
